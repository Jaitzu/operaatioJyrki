{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = require(\"react\");\n\nvar registration_1 = require(\"../../common/registration\");\n\nvar useDragDropManager_1 = require(\"./useDragDropManager\");\n\nvar TargetConnector_1 = require(\"../../common/TargetConnector\");\n\nvar DropTargetMonitorImpl_1 = require(\"../../common/DropTargetMonitorImpl\");\n\nvar useIsomorphicLayoutEffect_1 = require(\"./useIsomorphicLayoutEffect\");\n\nfunction useDropTargetMonitor() {\n  var manager = useDragDropManager_1.useDragDropManager();\n  var monitor = react_1.useMemo(function () {\n    return new DropTargetMonitorImpl_1.DropTargetMonitorImpl(manager);\n  }, [manager]);\n  var connector = react_1.useMemo(function () {\n    return new TargetConnector_1.TargetConnector(manager.getBackend());\n  }, [manager]);\n  return [monitor, connector];\n}\n\nexports.useDropTargetMonitor = useDropTargetMonitor;\n\nfunction useDropHandler(spec, monitor, connector) {\n  var manager = useDragDropManager_1.useDragDropManager();\n  var handler = react_1.useMemo(function () {\n    return {\n      canDrop: function () {\n        var canDrop = spec.current.canDrop;\n        return canDrop ? canDrop(monitor.getItem(), monitor) : true;\n      },\n      hover: function () {\n        var hover = spec.current.hover;\n\n        if (hover) {\n          hover(monitor.getItem(), monitor);\n        }\n      },\n      drop: function () {\n        var drop = spec.current.drop;\n\n        if (drop) {\n          return drop(monitor.getItem(), monitor);\n        }\n      }\n    };\n  }, [monitor]);\n  useIsomorphicLayoutEffect_1.useIsomorphicLayoutEffect(function registerHandler() {\n    var _a = registration_1.registerTarget(spec.current.accept, handler, manager),\n        handlerId = _a[0],\n        unregister = _a[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, [monitor, connector]);\n}\n\nexports.useDropHandler = useDropHandler;","map":{"version":3,"sources":["/home/janne/repot/OperaatioJyrki/node_modules/react-dnd-cjs/lib/hooks/internal/drop.js"],"names":["Object","defineProperty","exports","value","react_1","require","registration_1","useDragDropManager_1","TargetConnector_1","DropTargetMonitorImpl_1","useIsomorphicLayoutEffect_1","useDropTargetMonitor","manager","useDragDropManager","monitor","useMemo","DropTargetMonitorImpl","connector","TargetConnector","getBackend","useDropHandler","spec","handler","canDrop","current","getItem","hover","drop","useIsomorphicLayoutEffect","registerHandler","_a","registerTarget","accept","handlerId","unregister","receiveHandlerId"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar registration_1 = require(\"../../common/registration\");\nvar useDragDropManager_1 = require(\"./useDragDropManager\");\nvar TargetConnector_1 = require(\"../../common/TargetConnector\");\nvar DropTargetMonitorImpl_1 = require(\"../../common/DropTargetMonitorImpl\");\nvar useIsomorphicLayoutEffect_1 = require(\"./useIsomorphicLayoutEffect\");\nfunction useDropTargetMonitor() {\n    var manager = useDragDropManager_1.useDragDropManager();\n    var monitor = react_1.useMemo(function () { return new DropTargetMonitorImpl_1.DropTargetMonitorImpl(manager); }, [manager]);\n    var connector = react_1.useMemo(function () { return new TargetConnector_1.TargetConnector(manager.getBackend()); }, [\n        manager,\n    ]);\n    return [monitor, connector];\n}\nexports.useDropTargetMonitor = useDropTargetMonitor;\nfunction useDropHandler(spec, monitor, connector) {\n    var manager = useDragDropManager_1.useDragDropManager();\n    var handler = react_1.useMemo(function () {\n        return {\n            canDrop: function () {\n                var canDrop = spec.current.canDrop;\n                return canDrop ? canDrop(monitor.getItem(), monitor) : true;\n            },\n            hover: function () {\n                var hover = spec.current.hover;\n                if (hover) {\n                    hover(monitor.getItem(), monitor);\n                }\n            },\n            drop: function () {\n                var drop = spec.current.drop;\n                if (drop) {\n                    return drop(monitor.getItem(), monitor);\n                }\n            },\n        };\n    }, [monitor]);\n    useIsomorphicLayoutEffect_1.useIsomorphicLayoutEffect(function registerHandler() {\n        var _a = registration_1.registerTarget(spec.current.accept, handler, manager), handlerId = _a[0], unregister = _a[1];\n        monitor.receiveHandlerId(handlerId);\n        connector.receiveHandlerId(handlerId);\n        return unregister;\n    }, [monitor, connector]);\n}\nexports.useDropHandler = useDropHandler;\n"]},"metadata":{},"sourceType":"script"}