{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = require(\"react\");\n\nvar invariant_1 = __importDefault(require(\"invariant\"));\n\nvar useMonitorOutput_1 = require(\"./internal/useMonitorOutput\");\n\nvar useIsomorphicLayoutEffect_1 = require(\"./internal/useIsomorphicLayoutEffect\");\n\nvar drag_1 = require(\"./internal/drag\");\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification *\n */\n\n\nfunction useDrag(spec) {\n  var specRef = react_1.useRef(spec);\n  specRef.current = spec; // TODO: wire options into createSourceConnector\n\n  invariant_1.default(spec.item != null, 'item must be defined');\n  invariant_1.default(spec.item.type != null, 'item type must be defined');\n\n  var _a = drag_1.useDragSourceMonitor(),\n      monitor = _a[0],\n      connector = _a[1];\n\n  drag_1.useDragHandler(specRef, monitor, connector);\n  var result = useMonitorOutput_1.useMonitorOutput(monitor, specRef.current.collect || function () {\n    return {};\n  }, function () {\n    return connector.reconnect();\n  });\n  var connectDragSource = react_1.useMemo(function () {\n    return connector.hooks.dragSource();\n  }, [connector]);\n  var connectDragPreview = react_1.useMemo(function () {\n    return connector.hooks.dragPreview();\n  }, [connector]);\n  useIsomorphicLayoutEffect_1.useIsomorphicLayoutEffect(function () {\n    connector.dragSourceOptions = specRef.current.options || null;\n    connector.reconnect();\n  }, [connector]);\n  useIsomorphicLayoutEffect_1.useIsomorphicLayoutEffect(function () {\n    connector.dragPreviewOptions = specRef.current.previewOptions || null;\n    connector.reconnect();\n  }, [connector]);\n  return [result, connectDragSource, connectDragPreview];\n}\n\nexports.useDrag = useDrag;","map":{"version":3,"sources":["/home/janne/repot/OperaatioJyrki/node_modules/react-dnd-cjs/lib/hooks/useDrag.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","react_1","require","invariant_1","useMonitorOutput_1","useIsomorphicLayoutEffect_1","drag_1","useDrag","spec","specRef","useRef","current","default","item","type","_a","useDragSourceMonitor","monitor","connector","useDragHandler","result","useMonitorOutput","collect","reconnect","connectDragSource","useMemo","hooks","dragSource","connectDragPreview","dragPreview","useIsomorphicLayoutEffect","dragSourceOptions","options","dragPreviewOptions","previewOptions"],"mappings":"AAAA;;AACA,IAAIA,eAAe,GAAI,QAAQ,KAAKA,eAAd,IAAkC,UAAUC,GAAV,EAAe;AACnE,SAAQA,GAAG,IAAIA,GAAG,CAACC,UAAZ,GAA0BD,GAA1B,GAAgC;AAAE,eAAWA;AAAb,GAAvC;AACH,CAFD;;AAGAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,IAAIC,WAAW,GAAGT,eAAe,CAACQ,OAAO,CAAC,WAAD,CAAR,CAAjC;;AACA,IAAIE,kBAAkB,GAAGF,OAAO,CAAC,6BAAD,CAAhC;;AACA,IAAIG,2BAA2B,GAAGH,OAAO,CAAC,sCAAD,CAAzC;;AACA,IAAII,MAAM,GAAGJ,OAAO,CAAC,iBAAD,CAApB;AACA;;;;;;AAIA,SAASK,OAAT,CAAiBC,IAAjB,EAAuB;AACnB,MAAIC,OAAO,GAAGR,OAAO,CAACS,MAAR,CAAeF,IAAf,CAAd;AACAC,EAAAA,OAAO,CAACE,OAAR,GAAkBH,IAAlB,CAFmB,CAGnB;;AACAL,EAAAA,WAAW,CAACS,OAAZ,CAAoBJ,IAAI,CAACK,IAAL,IAAa,IAAjC,EAAuC,sBAAvC;AACAV,EAAAA,WAAW,CAACS,OAAZ,CAAoBJ,IAAI,CAACK,IAAL,CAAUC,IAAV,IAAkB,IAAtC,EAA4C,2BAA5C;;AACA,MAAIC,EAAE,GAAGT,MAAM,CAACU,oBAAP,EAAT;AAAA,MAAwCC,OAAO,GAAGF,EAAE,CAAC,CAAD,CAApD;AAAA,MAAyDG,SAAS,GAAGH,EAAE,CAAC,CAAD,CAAvE;;AACAT,EAAAA,MAAM,CAACa,cAAP,CAAsBV,OAAtB,EAA+BQ,OAA/B,EAAwCC,SAAxC;AACA,MAAIE,MAAM,GAAGhB,kBAAkB,CAACiB,gBAAnB,CAAoCJ,OAApC,EAA6CR,OAAO,CAACE,OAAR,CAAgBW,OAAhB,IAA4B,YAAY;AAAE,WAAQ,EAAR;AAAc,GAArG,EAAwG,YAAY;AAAE,WAAOJ,SAAS,CAACK,SAAV,EAAP;AAA+B,GAArJ,CAAb;AACA,MAAIC,iBAAiB,GAAGvB,OAAO,CAACwB,OAAR,CAAgB,YAAY;AAAE,WAAOP,SAAS,CAACQ,KAAV,CAAgBC,UAAhB,EAAP;AAAsC,GAApE,EAAsE,CAC1FT,SAD0F,CAAtE,CAAxB;AAGA,MAAIU,kBAAkB,GAAG3B,OAAO,CAACwB,OAAR,CAAgB,YAAY;AAAE,WAAOP,SAAS,CAACQ,KAAV,CAAgBG,WAAhB,EAAP;AAAuC,GAArE,EAAuE,CAC5FX,SAD4F,CAAvE,CAAzB;AAGAb,EAAAA,2BAA2B,CAACyB,yBAA5B,CAAsD,YAAY;AAC9DZ,IAAAA,SAAS,CAACa,iBAAV,GAA8BtB,OAAO,CAACE,OAAR,CAAgBqB,OAAhB,IAA2B,IAAzD;AACAd,IAAAA,SAAS,CAACK,SAAV;AACH,GAHD,EAGG,CAACL,SAAD,CAHH;AAIAb,EAAAA,2BAA2B,CAACyB,yBAA5B,CAAsD,YAAY;AAC9DZ,IAAAA,SAAS,CAACe,kBAAV,GAA+BxB,OAAO,CAACE,OAAR,CAAgBuB,cAAhB,IAAkC,IAAjE;AACAhB,IAAAA,SAAS,CAACK,SAAV;AACH,GAHD,EAGG,CAACL,SAAD,CAHH;AAIA,SAAO,CAACE,MAAD,EAASI,iBAAT,EAA4BI,kBAA5B,CAAP;AACH;;AACD7B,OAAO,CAACQ,OAAR,GAAkBA,OAAlB","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar invariant_1 = __importDefault(require(\"invariant\"));\nvar useMonitorOutput_1 = require(\"./internal/useMonitorOutput\");\nvar useIsomorphicLayoutEffect_1 = require(\"./internal/useIsomorphicLayoutEffect\");\nvar drag_1 = require(\"./internal/drag\");\n/**\n * useDragSource hook\n * @param sourceSpec The drag source specification *\n */\nfunction useDrag(spec) {\n    var specRef = react_1.useRef(spec);\n    specRef.current = spec;\n    // TODO: wire options into createSourceConnector\n    invariant_1.default(spec.item != null, 'item must be defined');\n    invariant_1.default(spec.item.type != null, 'item type must be defined');\n    var _a = drag_1.useDragSourceMonitor(), monitor = _a[0], connector = _a[1];\n    drag_1.useDragHandler(specRef, monitor, connector);\n    var result = useMonitorOutput_1.useMonitorOutput(monitor, specRef.current.collect || (function () { return ({}); }), function () { return connector.reconnect(); });\n    var connectDragSource = react_1.useMemo(function () { return connector.hooks.dragSource(); }, [\n        connector,\n    ]);\n    var connectDragPreview = react_1.useMemo(function () { return connector.hooks.dragPreview(); }, [\n        connector,\n    ]);\n    useIsomorphicLayoutEffect_1.useIsomorphicLayoutEffect(function () {\n        connector.dragSourceOptions = specRef.current.options || null;\n        connector.reconnect();\n    }, [connector]);\n    useIsomorphicLayoutEffect_1.useIsomorphicLayoutEffect(function () {\n        connector.dragPreviewOptions = specRef.current.previewOptions || null;\n        connector.reconnect();\n    }, [connector]);\n    return [result, connectDragSource, connectDragPreview];\n}\nexports.useDrag = useDrag;\n"]},"metadata":{},"sourceType":"script"}