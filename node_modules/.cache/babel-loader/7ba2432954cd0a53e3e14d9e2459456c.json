{"ast":null,"code":"\"use strict\";\n\nvar __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar invariant_1 = __importDefault(require(\"invariant\"));\n\nvar types_1 = require(\"./types\");\n\nvar js_utils_1 = require(\"../../utils/js_utils\");\n\nfunction createDrop(manager) {\n  return function drop(options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    var monitor = manager.getMonitor();\n    var registry = manager.getRegistry();\n    verifyInvariants(monitor);\n    var targetIds = getDroppableTargets(monitor); // Multiple actions are dispatched here, which is why this doesn't return an action\n\n    targetIds.forEach(function (targetId, index) {\n      var dropResult = determineDropResult(targetId, index, registry, monitor);\n      var action = {\n        type: types_1.DROP,\n        payload: {\n          dropResult: __assign(__assign({}, options), dropResult)\n        }\n      };\n      manager.dispatch(action);\n    });\n  };\n}\n\nexports.default = createDrop;\n\nfunction verifyInvariants(monitor) {\n  invariant_1.default(monitor.isDragging(), 'Cannot call drop while not dragging.');\n  invariant_1.default(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\n\nfunction determineDropResult(targetId, index, registry, monitor) {\n  var target = registry.getTarget(targetId);\n  var dropResult = target ? target.drop(monitor, targetId) : undefined;\n  verifyDropResultType(dropResult);\n\n  if (typeof dropResult === 'undefined') {\n    dropResult = index === 0 ? {} : monitor.getDropResult();\n  }\n\n  return dropResult;\n}\n\nfunction verifyDropResultType(dropResult) {\n  invariant_1.default(typeof dropResult === 'undefined' || js_utils_1.isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\n\nfunction getDroppableTargets(monitor) {\n  var targetIds = monitor.getTargetIds().filter(monitor.canDropOnTarget, monitor);\n  targetIds.reverse();\n  return targetIds;\n}","map":{"version":3,"sources":["/home/janne/repot/OperaatioJyrki/node_modules/dnd-core-cjs/lib/actions/dragDrop/drop.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__importDefault","mod","__esModule","defineProperty","exports","value","invariant_1","require","types_1","js_utils_1","createDrop","manager","drop","options","monitor","getMonitor","registry","getRegistry","verifyInvariants","targetIds","getDroppableTargets","forEach","targetId","index","dropResult","determineDropResult","action","type","DROP","payload","dispatch","default","isDragging","didDrop","target","getTarget","undefined","verifyDropResultType","getDropResult","isObject","getTargetIds","filter","canDropOnTarget","reverse"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar invariant_1 = __importDefault(require(\"invariant\"));\nvar types_1 = require(\"./types\");\nvar js_utils_1 = require(\"../../utils/js_utils\");\nfunction createDrop(manager) {\n    return function drop(options) {\n        if (options === void 0) { options = {}; }\n        var monitor = manager.getMonitor();\n        var registry = manager.getRegistry();\n        verifyInvariants(monitor);\n        var targetIds = getDroppableTargets(monitor);\n        // Multiple actions are dispatched here, which is why this doesn't return an action\n        targetIds.forEach(function (targetId, index) {\n            var dropResult = determineDropResult(targetId, index, registry, monitor);\n            var action = {\n                type: types_1.DROP,\n                payload: {\n                    dropResult: __assign(__assign({}, options), dropResult),\n                },\n            };\n            manager.dispatch(action);\n        });\n    };\n}\nexports.default = createDrop;\nfunction verifyInvariants(monitor) {\n    invariant_1.default(monitor.isDragging(), 'Cannot call drop while not dragging.');\n    invariant_1.default(!monitor.didDrop(), 'Cannot call drop twice during one drag operation.');\n}\nfunction determineDropResult(targetId, index, registry, monitor) {\n    var target = registry.getTarget(targetId);\n    var dropResult = target ? target.drop(monitor, targetId) : undefined;\n    verifyDropResultType(dropResult);\n    if (typeof dropResult === 'undefined') {\n        dropResult = index === 0 ? {} : monitor.getDropResult();\n    }\n    return dropResult;\n}\nfunction verifyDropResultType(dropResult) {\n    invariant_1.default(typeof dropResult === 'undefined' || js_utils_1.isObject(dropResult), 'Drop result must either be an object or undefined.');\n}\nfunction getDroppableTargets(monitor) {\n    var targetIds = monitor\n        .getTargetIds()\n        .filter(monitor.canDropOnTarget, monitor);\n    targetIds.reverse();\n    return targetIds;\n}\n"]},"metadata":{},"sourceType":"script"}