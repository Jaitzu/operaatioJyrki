{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar redux_1 = require(\"redux\");\n\nvar reducers_1 = __importDefault(require(\"./reducers\"));\n\nvar dragDrop_1 = __importDefault(require(\"./actions/dragDrop\"));\n\nvar DragDropMonitorImpl_1 = __importDefault(require(\"./DragDropMonitorImpl\"));\n\nvar HandlerRegistryImpl_1 = __importDefault(require(\"./HandlerRegistryImpl\"));\n\nfunction makeStoreInstance(debugMode) {\n  // TODO: if we ever make a react-native version of this,\n  // we'll need to consider how to pull off dev-tooling\n  var reduxDevTools = typeof window !== 'undefined' && window.__REDUX_DEVTOOLS_EXTENSION__;\n  return redux_1.createStore(reducers_1.default, debugMode && reduxDevTools && reduxDevTools({\n    name: 'dnd-core',\n    instanceId: 'dnd-core'\n  }));\n}\n\nvar DragDropManagerImpl =\n/** @class */\nfunction () {\n  function DragDropManagerImpl(debugMode) {\n    var _this = this;\n\n    if (debugMode === void 0) {\n      debugMode = false;\n    }\n\n    this.isSetUp = false;\n\n    this.handleRefCountChange = function () {\n      var shouldSetUp = _this.store.getState().refCount > 0;\n\n      if (_this.backend) {\n        if (shouldSetUp && !_this.isSetUp) {\n          _this.backend.setup();\n\n          _this.isSetUp = true;\n        } else if (!shouldSetUp && _this.isSetUp) {\n          _this.backend.teardown();\n\n          _this.isSetUp = false;\n        }\n      }\n    };\n\n    var store = makeStoreInstance(debugMode);\n    this.store = store;\n    this.monitor = new DragDropMonitorImpl_1.default(store, new HandlerRegistryImpl_1.default(store));\n    store.subscribe(this.handleRefCountChange);\n  }\n\n  DragDropManagerImpl.prototype.receiveBackend = function (backend) {\n    this.backend = backend;\n  };\n\n  DragDropManagerImpl.prototype.getMonitor = function () {\n    return this.monitor;\n  };\n\n  DragDropManagerImpl.prototype.getBackend = function () {\n    return this.backend;\n  };\n\n  DragDropManagerImpl.prototype.getRegistry = function () {\n    return this.monitor.registry;\n  };\n\n  DragDropManagerImpl.prototype.getActions = function () {\n    /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n    var manager = this;\n    var dispatch = this.store.dispatch;\n\n    function bindActionCreator(actionCreator) {\n      return function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var action = actionCreator.apply(manager, args);\n\n        if (typeof action !== 'undefined') {\n          dispatch(action);\n        }\n      };\n    }\n\n    var actions = dragDrop_1.default(this);\n    return Object.keys(actions).reduce(function (boundActions, key) {\n      var action = actions[key];\n      boundActions[key] = bindActionCreator(action);\n      return boundActions;\n    }, {});\n  };\n\n  DragDropManagerImpl.prototype.dispatch = function (action) {\n    this.store.dispatch(action);\n  };\n\n  return DragDropManagerImpl;\n}();\n\nexports.default = DragDropManagerImpl;","map":{"version":3,"sources":["/home/janne/repot/OperaatioJyrki/node_modules/dnd-core-cjs/lib/DragDropManagerImpl.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","redux_1","require","reducers_1","dragDrop_1","DragDropMonitorImpl_1","HandlerRegistryImpl_1","makeStoreInstance","debugMode","reduxDevTools","window","__REDUX_DEVTOOLS_EXTENSION__","createStore","default","name","instanceId","DragDropManagerImpl","_this","isSetUp","handleRefCountChange","shouldSetUp","store","getState","refCount","backend","setup","teardown","monitor","subscribe","prototype","receiveBackend","getMonitor","getBackend","getRegistry","registry","getActions","manager","dispatch","bindActionCreator","actionCreator","args","_i","arguments","length","action","apply","actions","keys","reduce","boundActions","key"],"mappings":"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","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar redux_1 = require(\"redux\");\nvar reducers_1 = __importDefault(require(\"./reducers\"));\nvar dragDrop_1 = __importDefault(require(\"./actions/dragDrop\"));\nvar DragDropMonitorImpl_1 = __importDefault(require(\"./DragDropMonitorImpl\"));\nvar HandlerRegistryImpl_1 = __importDefault(require(\"./HandlerRegistryImpl\"));\nfunction makeStoreInstance(debugMode) {\n    // TODO: if we ever make a react-native version of this,\n    // we'll need to consider how to pull off dev-tooling\n    var reduxDevTools = typeof window !== 'undefined' &&\n        window.__REDUX_DEVTOOLS_EXTENSION__;\n    return redux_1.createStore(reducers_1.default, debugMode &&\n        reduxDevTools &&\n        reduxDevTools({\n            name: 'dnd-core',\n            instanceId: 'dnd-core',\n        }));\n}\nvar DragDropManagerImpl = /** @class */ (function () {\n    function DragDropManagerImpl(debugMode) {\n        var _this = this;\n        if (debugMode === void 0) { debugMode = false; }\n        this.isSetUp = false;\n        this.handleRefCountChange = function () {\n            var shouldSetUp = _this.store.getState().refCount > 0;\n            if (_this.backend) {\n                if (shouldSetUp && !_this.isSetUp) {\n                    _this.backend.setup();\n                    _this.isSetUp = true;\n                }\n                else if (!shouldSetUp && _this.isSetUp) {\n                    _this.backend.teardown();\n                    _this.isSetUp = false;\n                }\n            }\n        };\n        var store = makeStoreInstance(debugMode);\n        this.store = store;\n        this.monitor = new DragDropMonitorImpl_1.default(store, new HandlerRegistryImpl_1.default(store));\n        store.subscribe(this.handleRefCountChange);\n    }\n    DragDropManagerImpl.prototype.receiveBackend = function (backend) {\n        this.backend = backend;\n    };\n    DragDropManagerImpl.prototype.getMonitor = function () {\n        return this.monitor;\n    };\n    DragDropManagerImpl.prototype.getBackend = function () {\n        return this.backend;\n    };\n    DragDropManagerImpl.prototype.getRegistry = function () {\n        return this.monitor.registry;\n    };\n    DragDropManagerImpl.prototype.getActions = function () {\n        /* eslint-disable-next-line @typescript-eslint/no-this-alias */\n        var manager = this;\n        var dispatch = this.store.dispatch;\n        function bindActionCreator(actionCreator) {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                var action = actionCreator.apply(manager, args);\n                if (typeof action !== 'undefined') {\n                    dispatch(action);\n                }\n            };\n        }\n        var actions = dragDrop_1.default(this);\n        return Object.keys(actions).reduce(function (boundActions, key) {\n            var action = actions[key];\n            boundActions[key] = bindActionCreator(action);\n            return boundActions;\n        }, {});\n    };\n    DragDropManagerImpl.prototype.dispatch = function (action) {\n        this.store.dispatch(action);\n    };\n    return DragDropManagerImpl;\n}());\nexports.default = DragDropManagerImpl;\n"]},"metadata":{},"sourceType":"script"}