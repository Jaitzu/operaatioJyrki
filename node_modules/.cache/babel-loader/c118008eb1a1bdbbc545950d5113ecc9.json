{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar react_1 = require(\"react\");\n\nvar invariant_1 = __importDefault(require(\"invariant\"));\n\nvar registration_1 = require(\"../../common/registration\");\n\nvar useDragDropManager_1 = require(\"./useDragDropManager\");\n\nvar DragSourceMonitorImpl_1 = require(\"../../common/DragSourceMonitorImpl\");\n\nvar SourceConnector_1 = require(\"../../common/SourceConnector\");\n\nvar useIsomorphicLayoutEffect_1 = require(\"./useIsomorphicLayoutEffect\");\n\nfunction useDragSourceMonitor() {\n  var manager = useDragDropManager_1.useDragDropManager();\n  var monitor = react_1.useMemo(function () {\n    return new DragSourceMonitorImpl_1.DragSourceMonitorImpl(manager);\n  }, [manager]);\n  var connector = react_1.useMemo(function () {\n    return new SourceConnector_1.SourceConnector(manager.getBackend());\n  }, [manager]);\n  return [monitor, connector];\n}\n\nexports.useDragSourceMonitor = useDragSourceMonitor;\n\nfunction useDragHandler(spec, monitor, connector) {\n  var manager = useDragDropManager_1.useDragDropManager();\n  var handler = react_1.useMemo(function () {\n    return {\n      beginDrag: function () {\n        var _a = spec.current,\n            begin = _a.begin,\n            item = _a.item;\n\n        if (begin) {\n          var beginResult = begin(monitor);\n          invariant_1.default(beginResult == null || typeof beginResult === 'object', 'dragSpec.begin() must either return an object, undefined, or null');\n          return beginResult || item || {};\n        }\n\n        return item || {};\n      },\n      canDrag: function () {\n        if (typeof spec.current.canDrag === 'boolean') {\n          return spec.current.canDrag;\n        } else if (typeof spec.current.canDrag === 'function') {\n          return spec.current.canDrag(monitor);\n        } else {\n          return true;\n        }\n      },\n      isDragging: function (globalMonitor, target) {\n        var isDragging = spec.current.isDragging;\n        return isDragging ? isDragging(monitor) : target === globalMonitor.getSourceId();\n      },\n      endDrag: function () {\n        var end = spec.current.end;\n\n        if (end) {\n          end(monitor.getItem(), monitor);\n        }\n\n        connector.reconnect();\n      }\n    };\n  }, []);\n  useIsomorphicLayoutEffect_1.useIsomorphicLayoutEffect(function registerHandler() {\n    var _a = registration_1.registerSource(spec.current.item.type, handler, manager),\n        handlerId = _a[0],\n        unregister = _a[1];\n\n    monitor.receiveHandlerId(handlerId);\n    connector.receiveHandlerId(handlerId);\n    return unregister;\n  }, []);\n}\n\nexports.useDragHandler = useDragHandler;","map":{"version":3,"sources":["/home/janne/repot/OperaatioJyrki/node_modules/react-dnd-cjs/lib/hooks/internal/drag.js"],"names":["__importDefault","mod","__esModule","Object","defineProperty","exports","value","react_1","require","invariant_1","registration_1","useDragDropManager_1","DragSourceMonitorImpl_1","SourceConnector_1","useIsomorphicLayoutEffect_1","useDragSourceMonitor","manager","useDragDropManager","monitor","useMemo","DragSourceMonitorImpl","connector","SourceConnector","getBackend","useDragHandler","spec","handler","beginDrag","_a","current","begin","item","beginResult","default","canDrag","isDragging","globalMonitor","target","getSourceId","endDrag","end","getItem","reconnect","useIsomorphicLayoutEffect","registerHandler","registerSource","type","handlerId","unregister","receiveHandlerId"],"mappings":"AAAA;;AACA,IAAIA,eAAe,GAAI,QAAQ,KAAKA,eAAd,IAAkC,UAAUC,GAAV,EAAe;AACnE,SAAQA,GAAG,IAAIA,GAAG,CAACC,UAAZ,GAA0BD,GAA1B,GAAgC;AAAE,eAAWA;AAAb,GAAvC;AACH,CAFD;;AAGAE,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAA7C;;AACA,IAAIC,OAAO,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,IAAIC,WAAW,GAAGT,eAAe,CAACQ,OAAO,CAAC,WAAD,CAAR,CAAjC;;AACA,IAAIE,cAAc,GAAGF,OAAO,CAAC,2BAAD,CAA5B;;AACA,IAAIG,oBAAoB,GAAGH,OAAO,CAAC,sBAAD,CAAlC;;AACA,IAAII,uBAAuB,GAAGJ,OAAO,CAAC,oCAAD,CAArC;;AACA,IAAIK,iBAAiB,GAAGL,OAAO,CAAC,8BAAD,CAA/B;;AACA,IAAIM,2BAA2B,GAAGN,OAAO,CAAC,6BAAD,CAAzC;;AACA,SAASO,oBAAT,GAAgC;AAC5B,MAAIC,OAAO,GAAGL,oBAAoB,CAACM,kBAArB,EAAd;AACA,MAAIC,OAAO,GAAGX,OAAO,CAACY,OAAR,CAAgB,YAAY;AAAE,WAAO,IAAIP,uBAAuB,CAACQ,qBAA5B,CAAkDJ,OAAlD,CAAP;AAAoE,GAAlG,EAAoG,CAACA,OAAD,CAApG,CAAd;AACA,MAAIK,SAAS,GAAGd,OAAO,CAACY,OAAR,CAAgB,YAAY;AAAE,WAAO,IAAIN,iBAAiB,CAACS,eAAtB,CAAsCN,OAAO,CAACO,UAAR,EAAtC,CAAP;AAAqE,GAAnG,EAAqG,CACjHP,OADiH,CAArG,CAAhB;AAGA,SAAO,CAACE,OAAD,EAAUG,SAAV,CAAP;AACH;;AACDhB,OAAO,CAACU,oBAAR,GAA+BA,oBAA/B;;AACA,SAASS,cAAT,CAAwBC,IAAxB,EAA8BP,OAA9B,EAAuCG,SAAvC,EAAkD;AAC9C,MAAIL,OAAO,GAAGL,oBAAoB,CAACM,kBAArB,EAAd;AACA,MAAIS,OAAO,GAAGnB,OAAO,CAACY,OAAR,CAAgB,YAAY;AACtC,WAAO;AACHQ,MAAAA,SAAS,EAAE,YAAY;AACnB,YAAIC,EAAE,GAAGH,IAAI,CAACI,OAAd;AAAA,YAAuBC,KAAK,GAAGF,EAAE,CAACE,KAAlC;AAAA,YAAyCC,IAAI,GAAGH,EAAE,CAACG,IAAnD;;AACA,YAAID,KAAJ,EAAW;AACP,cAAIE,WAAW,GAAGF,KAAK,CAACZ,OAAD,CAAvB;AACAT,UAAAA,WAAW,CAACwB,OAAZ,CAAoBD,WAAW,IAAI,IAAf,IAAuB,OAAOA,WAAP,KAAuB,QAAlE,EAA4E,mEAA5E;AACA,iBAAOA,WAAW,IAAID,IAAf,IAAuB,EAA9B;AACH;;AACD,eAAOA,IAAI,IAAI,EAAf;AACH,OATE;AAUHG,MAAAA,OAAO,EAAE,YAAY;AACjB,YAAI,OAAOT,IAAI,CAACI,OAAL,CAAaK,OAApB,KAAgC,SAApC,EAA+C;AAC3C,iBAAOT,IAAI,CAACI,OAAL,CAAaK,OAApB;AACH,SAFD,MAGK,IAAI,OAAOT,IAAI,CAACI,OAAL,CAAaK,OAApB,KAAgC,UAApC,EAAgD;AACjD,iBAAOT,IAAI,CAACI,OAAL,CAAaK,OAAb,CAAqBhB,OAArB,CAAP;AACH,SAFI,MAGA;AACD,iBAAO,IAAP;AACH;AACJ,OApBE;AAqBHiB,MAAAA,UAAU,EAAE,UAAUC,aAAV,EAAyBC,MAAzB,EAAiC;AACzC,YAAIF,UAAU,GAAGV,IAAI,CAACI,OAAL,CAAaM,UAA9B;AACA,eAAOA,UAAU,GACXA,UAAU,CAACjB,OAAD,CADC,GAEXmB,MAAM,KAAKD,aAAa,CAACE,WAAd,EAFjB;AAGH,OA1BE;AA2BHC,MAAAA,OAAO,EAAE,YAAY;AACjB,YAAIC,GAAG,GAAGf,IAAI,CAACI,OAAL,CAAaW,GAAvB;;AACA,YAAIA,GAAJ,EAAS;AACLA,UAAAA,GAAG,CAACtB,OAAO,CAACuB,OAAR,EAAD,EAAoBvB,OAApB,CAAH;AACH;;AACDG,QAAAA,SAAS,CAACqB,SAAV;AACH;AAjCE,KAAP;AAmCH,GApCa,EAoCX,EApCW,CAAd;AAqCA5B,EAAAA,2BAA2B,CAAC6B,yBAA5B,CAAsD,SAASC,eAAT,GAA2B;AAC7E,QAAIhB,EAAE,GAAGlB,cAAc,CAACmC,cAAf,CAA8BpB,IAAI,CAACI,OAAL,CAAaE,IAAb,CAAkBe,IAAhD,EAAsDpB,OAAtD,EAA+DV,OAA/D,CAAT;AAAA,QAAkF+B,SAAS,GAAGnB,EAAE,CAAC,CAAD,CAAhG;AAAA,QAAqGoB,UAAU,GAAGpB,EAAE,CAAC,CAAD,CAApH;;AACAV,IAAAA,OAAO,CAAC+B,gBAAR,CAAyBF,SAAzB;AACA1B,IAAAA,SAAS,CAAC4B,gBAAV,CAA2BF,SAA3B;AACA,WAAOC,UAAP;AACH,GALD,EAKG,EALH;AAMH;;AACD3C,OAAO,CAACmB,cAAR,GAAyBA,cAAzB","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar react_1 = require(\"react\");\nvar invariant_1 = __importDefault(require(\"invariant\"));\nvar registration_1 = require(\"../../common/registration\");\nvar useDragDropManager_1 = require(\"./useDragDropManager\");\nvar DragSourceMonitorImpl_1 = require(\"../../common/DragSourceMonitorImpl\");\nvar SourceConnector_1 = require(\"../../common/SourceConnector\");\nvar useIsomorphicLayoutEffect_1 = require(\"./useIsomorphicLayoutEffect\");\nfunction useDragSourceMonitor() {\n    var manager = useDragDropManager_1.useDragDropManager();\n    var monitor = react_1.useMemo(function () { return new DragSourceMonitorImpl_1.DragSourceMonitorImpl(manager); }, [manager]);\n    var connector = react_1.useMemo(function () { return new SourceConnector_1.SourceConnector(manager.getBackend()); }, [\n        manager,\n    ]);\n    return [monitor, connector];\n}\nexports.useDragSourceMonitor = useDragSourceMonitor;\nfunction useDragHandler(spec, monitor, connector) {\n    var manager = useDragDropManager_1.useDragDropManager();\n    var handler = react_1.useMemo(function () {\n        return {\n            beginDrag: function () {\n                var _a = spec.current, begin = _a.begin, item = _a.item;\n                if (begin) {\n                    var beginResult = begin(monitor);\n                    invariant_1.default(beginResult == null || typeof beginResult === 'object', 'dragSpec.begin() must either return an object, undefined, or null');\n                    return beginResult || item || {};\n                }\n                return item || {};\n            },\n            canDrag: function () {\n                if (typeof spec.current.canDrag === 'boolean') {\n                    return spec.current.canDrag;\n                }\n                else if (typeof spec.current.canDrag === 'function') {\n                    return spec.current.canDrag(monitor);\n                }\n                else {\n                    return true;\n                }\n            },\n            isDragging: function (globalMonitor, target) {\n                var isDragging = spec.current.isDragging;\n                return isDragging\n                    ? isDragging(monitor)\n                    : target === globalMonitor.getSourceId();\n            },\n            endDrag: function () {\n                var end = spec.current.end;\n                if (end) {\n                    end(monitor.getItem(), monitor);\n                }\n                connector.reconnect();\n            },\n        };\n    }, []);\n    useIsomorphicLayoutEffect_1.useIsomorphicLayoutEffect(function registerHandler() {\n        var _a = registration_1.registerSource(spec.current.item.type, handler, manager), handlerId = _a[0], unregister = _a[1];\n        monitor.receiveHandlerId(handlerId);\n        connector.receiveHandlerId(handlerId);\n        return unregister;\n    }, []);\n}\nexports.useDragHandler = useDragHandler;\n"]},"metadata":{},"sourceType":"script"}